<!DOCTYPE html>
<html>

<head>
    <title>Redirecting...</title>
</head>
<!-- onload="waitUntilReady();"" -->

<body>
</body>
<script>
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const shared = urlParams.get('s');
    if (shared != null) {
        const webUrl = `https://touka-bot.github.io/page/generated/${shared}/`;
        setTimeout(checkSite(), 5000);
    }

    function isThere(url) {
        var req = new AJ(); // XMLHttpRequest object
        try {
            req.open("HEAD", url, false);
            req.send(null);
            return req.status == 200 ? true : false;
        } catch (er) {
            return false;
        }
    }

    function AJ() {
        var obj;
        if (window.XMLHttpRequest) obj = new XMLHttpRequest();
        else if (window.ActiveXObject) {
            try {
                obj = new ActiveXObject('MSXML2.XMLHTTP.3.0');
            } catch (er) {
                try {
                    obj = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (er) {
                    obj = false;
                }
            }
        }
        return obj;
    }

    function checkSite() {
        if (isThere(webUrl))
            window.location.replace(webUrl);
        setTimeout(checkSite(), 5000);
    }
</script>

</html>
